(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bb6670de"],{2071:function(e,t,n){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"line-height":"1.8"}},[1==e.qType?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.qLoading,expression:"qLoading"}]},[t("div",{staticClass:"q-title",domProps:{innerHTML:e._s(e.question.title)}}),t("div",{staticClass:"q-content"},[t("el-radio-group",{on:{change:function(t){e.answer.completed=!0}},model:{value:e.answer.content,callback:function(t){e.$set(e.answer,"content",t)},expression:"answer.content"}},e._l(e.question.items,(function(n){return t("el-radio",{key:n.prefix,attrs:{label:n.prefix}},[t("span",{staticClass:"question-prefix"},[e._v(e._s(n.prefix)+".")]),t("span",{staticClass:"q-item-span-content",domProps:{innerHTML:e._s(n.content)}})])})),1)],1)]):2==e.qType?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.qLoading,expression:"qLoading"}]},[t("div",{staticClass:"q-title",domProps:{innerHTML:e._s(e.question.title)}}),t("div",{staticClass:"q-content"},[t("el-checkbox-group",{on:{change:function(t){e.answer.completed=!0}},model:{value:e.answer.contentArray,callback:function(t){e.$set(e.answer,"contentArray",t)},expression:"answer.contentArray"}},e._l(e.question.items,(function(n){return t("el-checkbox",{key:n.prefix,attrs:{label:n.prefix}},[t("span",{staticClass:"question-prefix"},[e._v(e._s(n.prefix)+".")]),t("span",{staticClass:"q-item-span-content",domProps:{innerHTML:e._s(n.content)}})])})),1)],1)]):3==e.qType?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.qLoading,expression:"qLoading"}]},[t("div",{staticClass:"q-title",staticStyle:{display:"inline","margin-right":"10px"},domProps:{innerHTML:e._s(e.question.title)}}),t("span",{staticStyle:{"padding-right":"10px"}},[e._v("(")]),t("el-radio-group",{on:{change:function(t){e.answer.completed=!0}},model:{value:e.answer.content,callback:function(t){e.$set(e.answer,"content",t)},expression:"answer.content"}},e._l(e.question.items,(function(n){return t("el-radio",{key:n.prefix,attrs:{label:n.prefix}},[t("span",{staticClass:"q-item-span-content",domProps:{innerHTML:e._s(n.content)}})])})),1),t("span",{staticStyle:{"padding-left":"10px"}},[e._v(")")])],1):4==e.qType?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.qLoading,expression:"qLoading"}]},[t("div",{staticClass:"q-title",domProps:{innerHTML:e._s(e.question.title)}}),t("div",e._l(e.question.items,(function(n){return t("el-form-item",{key:n.prefix,staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{label:n.prefix,"label-width":"50px"}},[t("el-input",{on:{change:function(t){e.answer.completed=!0}},model:{value:e.answer.contentArray[n.prefix-1],callback:function(t){e.$set(e.answer.contentArray,n.prefix-1,t)},expression:"answer.contentArray[item.prefix-1]"}})],1)})),1)]):5==e.qType?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.qLoading,expression:"qLoading"}]},[t("div",{staticClass:"q-title",domProps:{innerHTML:e._s(e.question.title)}}),t("div",[t("el-input",{attrs:{type:"textarea",rows:"5"},on:{change:function(t){e.answer.completed=!0}},model:{value:e.answer.content,callback:function(t){e.$set(e.answer,"content",t)},expression:"answer.content"}})],1)]):t("div")])},a=[],s={name:"QuestionShow",props:{question:{type:Object,default:function(){return{}}},answer:{type:Object,default:function(){return{id:null,content:"",contentArray:[]}}},qLoading:{type:Boolean,default:!1},qType:{type:Number,default:0}},methods:{}},r=s,o=n("2877"),l=Object(o["a"])(r,i,a,!1,null,null,null);t["a"]=l.exports},"4a0c":function(e,t,n){"use strict";var i=n("b775");t["a"]={select:e=>Object(i["a"])("/api/student/exam/paper/select/"+e),pageList:e=>Object(i["a"])("/api/student/exam/paper/pageList",e)}},"6cce":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-row",{staticClass:"do-exam-title"},[t("el-col",{attrs:{span:24}},[e._l(e.answer.answerItems,(function(n){return t("span",{key:n.itemOrder},[t("el-tag",{staticClass:"do-exam-title-tag",attrs:{type:e.questionCompleted(n.completed)},on:{click:function(t){return e.goAnchor("#question-"+n.itemOrder)}}},[e._v(e._s(n.itemOrder))])],1)})),t("span",{staticClass:"do-exam-time"},[t("label",[e._v("剩余时间：")]),t("label",[e._v(e._s(e.formatSeconds(e.remainTime)))])])],2)],1),t("el-row",{staticClass:"do-exam-title-hidden"},[t("el-col",{attrs:{span:24}},[e._l(e.answer.answerItems,(function(n){return t("span",{key:n.itemOrder},[t("el-tag",{staticClass:"do-exam-title-tag"},[e._v(e._s(n.itemOrder))])],1)})),t("span",{staticClass:"do-exam-time"},[t("label",[e._v("剩余时间：")])])],2)],1),t("el-container",{staticClass:"app-item-contain"},[t("el-header",{staticClass:"align-center"},[t("h1",[e._v(e._s(e.form.name))]),t("div",[t("span",{staticClass:"question-title-padding"},[e._v("试卷总分："+e._s(e.form.score))]),t("span",{staticClass:"question-title-padding"},[e._v("考试时间："+e._s(e.form.suggestTime)+"分钟")])])]),t("el-main",[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"form",attrs:{model:e.form,"label-width":"100px"}},[e._l(e.form.titleItems,(function(n,i){return t("el-row",{key:i},[t("h3",[e._v(e._s(n.name))]),0!==n.questionItems.length?t("el-card",{staticClass:"exampaper-item-box"},e._l(n.questionItems,(function(n){return t("el-form-item",{key:n.itemOrder,staticClass:"exam-question-item",attrs:{label:n.itemOrder+".","label-width":"50px",id:"question-"+n.itemOrder}},[t("QuestionEdit",{attrs:{qType:n.questionType,question:n,answer:e.answer.answerItems[n.itemOrder-1]}})],1)})),1):e._e()],1)})),t("el-row",{staticClass:"do-align-center"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")]),t("el-button",[e._v("取消")])],1)],2)],1)],1)],1)},a=[],s=(n("14d9"),n("2f62")),r=n("ed08"),o=n("2071"),l=n("4a0c"),c=n("ed24"),d={components:{QuestionEdit:o["a"]},data(){return{form:{},formLoading:!1,answer:{questionId:null,doTime:0,answerItems:[]},timer:null,remainTime:0}},created(){let e=this.$route.query.id,t=this;e&&0!==parseInt(e)&&(t.formLoading=!0,l["a"].select(e).then(e=>{t.form=e.response,t.remainTime=60*e.response.suggestTime,t.initAnswer(),t.timeReduce(),t.formLoading=!1}))},mounted(){},beforeDestroy(){window.clearInterval(this.timer)},methods:{formatSeconds(e){return Object(r["a"])(e)},timeReduce(){let e=this;this.timer=setInterval((function(){e.remainTime<=0?e.submitForm():(++e.answer.doTime,--e.remainTime)}),1e3)},questionCompleted(e){return this.enumFormat(this.doCompletedTag,e)},goAnchor(e){this.$el.querySelector(e).scrollIntoView({behavior:"instant",block:"center",inline:"nearest"})},initAnswer(){this.answer.id=this.form.id;let e=this.form.titleItems;for(let t in e){let n=e[t].questionItems;for(let e in n){let t=n[e];this.answer.answerItems.push({questionId:t.id,content:null,contentArray:[],completed:!1,itemOrder:t.itemOrder})}}},submitForm(){let e=this;window.clearInterval(e.timer),e.formLoading=!0,c["a"].answerSubmit(this.answer).then(t=>{1===t.code?e.$alert("试卷得分："+t.response+"分","考试结果",{confirmButtonText:"返回考试记录",callback:t=>{e.$router.push("/record/index")}}):e.$message.error(t.message),e.formLoading=!1}).catch(t=>{e.formLoading=!1})}},computed:{...Object(s["c"])("enumItem",["enumFormat"]),...Object(s["e"])("enumItem",{doCompletedTag:e=>e.exam.question.answer.doCompletedTag})}},m=d,u=(n("ec86"),n("2877")),p=Object(u["a"])(m,i,a,!1,null,"a51a27fe",null);t["default"]=p.exports},"763a":function(e,t,n){},ec86:function(e,t,n){"use strict";n("763a")}}]);